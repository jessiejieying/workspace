<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html xmlns:fc xmlns:v="urn:schemas-microsoft-com:vml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
.userData {
    behavior: url(#default#userData);
}
v\:* { Behavior: url(#default#VML) }
</style>
<script src="../../resources/common/js/jquery.js"></script>
<script src="../../fceform/js/MicrosoftAjax.js"></script>
<script src="../../fceform/js/fcpub.js"></script>
<script src="../../fceform/js/fcrundj.js"></script>
<script src="../../fceform/js/tabpane.js"></script>
</head>
<body onLoad="pub_window_onload()"
onkeydown="RunTabindex()" onbeforeunload="pub_window_onbeforeunload()" onkeypress="pub_window_onkeypress()"
onResize="pub_window_onresize()">
<script>pub_djhtm();</script> 
        <script id='userFunc'>var wfId = QueryURL.GetValue('wf_id');
var WfName = "";
var WfDesc = "";
var WfVersion = "";
function afterLoad() {
	var sKey = "?operate=get_flow_info&wf_id=" + wfId;
	$.ajax({
		type       :"POST",
		url        :project + "/servlet/WorkflowPortal" + sKey,
		processData:false,
		data       :'<root></root>',
		contentType:'utf-8',
		success    :function (msg) {
			var oDom = newXml(msg);
			var bResult = $(oDom).find('n').eq(0).text();
			if (bResult == "false") {
				$.dialog.alert("获取流程信息发生错误：" + $(oDom).find('message').text(), 5);
				return;
			} else {
				var wfInfo = $(oDom).find('n').eq(1);
				WfName = wfInfo.find('wf_name').text();
				WfDesc = wfInfo.find('wf_desc').text();
				WfVersion = wfInfo.find('wf_version').text();
				LoadWorkflowTrace(wfId, 'flow', 'ds1');
			}

		},
		error      :function (msg) {
			$.dialog.tips('访问后台失败！')
		}
	});
	var grid = getGrid('grid1');
	var dataStore = getDs('ds1');
	grid.attachEvent("onRowDblClicked", function (rId, cInd) {
		var item = dataStore.item(rId);
		openHistoryAction(item.stepid, item.actionid, item.dynamic_instance_id, item.traceId, item.stepType);
	});

}</script><script src='../../fceform/js/raphael.js'></script><script >document.styleSheets[0].addRule("fc\\:webgrid","behavior: url(../../fceform/htc/webgrid.htc)",0);</script><script src='../../fceform/js/fcwebgrid.js'></script><script >document.styleSheets[0].addRule("fc\\:fc_code","behavior: url(../../fceform/htc/fc_code.htc)",0);</script><script >document.styleSheets[0].addRule("fc\\:dataset","behavior: url(../../fceform/htc/dataset.htc)",0);</script><script src='../../fceform/js/fcdataset.js'></script>
<DIV id=SKbillsheet jslib="raphael.js" isCheckPermit="否" alertType="1" BLONopenBefore userType BLONclose center="  " contxml="<root><label><id>label1</id><id>label2</id></label><img><id>img1</id><id>img2</id></img><tab><id>tab1</id></tab><div><id>div3</id><id>flow</id></div><grid><id>grid1</id></grid><dataset><id>ds1</id></dataset></root>" controlno="SKButton:0;SKDBedit:0;checkbox:0;label:0;radio:0;listbox:0;textarea:0;combobox:0;password:0;upload:0;SKDBtext:0;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:0;tab:1;div:0;DsMain_field:0;a:0;button:0;text:0;hr:0;checkboxlist:0;radiolist:0;dropdownlist:0;grid:2;dataset:0;spin:0;excel:0;tree:0;ebshow:0;ebiao:0;layout:0;page:0;editor:0" billtaborder="<root><taborder>grid1</taborder></root>" isfile="是" posheight poswidth postop posleft window="当前窗口" caption="流程图" type="eden_wf" dj_sn="wf_history_list" toolbar="不带工具栏" BLONopen="afterLoad()" AutoResizeXml><DIV style="BORDER-BOTTOM: 0px; POSITION: absolute; BORDER-LEFT: 0px; PADDING-BOTTOM: 0px; BACKGROUND-COLOR: #ffffff; MARGIN: 0px; PADDING-LEFT: 0px; WIDTH: 940px; PADDING-RIGHT: 0px; HEIGHT: 50px; BORDER-TOP: 0px; TOP: 709px; BORDER-RIGHT: 0px; PADDING-TOP: 0px; LEFT: 5px" id=div3 onmovestart=moveStart() controltype="div" NotBg="否"></DIV><?xml:namespace prefix = fc /><fc:dataset id=ds1 controltype="dataset" idtype="1" issubds="否" submitno="1" submittype="1" isSubGrid="否" isaddemptyrec="否" pubpara="否" opensortno="2" format="<fields><field><fieldname>stepType</fieldname><datatype>字符</datatype><displaylabel>步骤类型</displaylabel><size>20</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>是</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>step</fieldname><datatype>字符</datatype><displaylabel>步骤名称</displaylabel><size>100</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>是</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>stepid</fieldname><datatype>字符</datatype><displaylabel>步骤id</displaylabel><size>10</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>是</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>action</fieldname><datatype>字符</datatype><displaylabel>执行的动作</displaylabel><size>100</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>否</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>actionid</fieldname><datatype>字符</datatype><displaylabel>动作id</displaylabel><size>10</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>否</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>dynamic_instance_id</fieldname><datatype>字符</datatype><displaylabel>分支实例id</displaylabel><size>10</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>否</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>status</fieldname><datatype>字符</datatype><displaylabel>步骤状态</displaylabel><size>100</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>是</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>caller</fieldname><datatype>字符</datatype><displaylabel>执行者</displaylabel><size>100</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>是</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>remark</fieldname><datatype>字符</datatype><displaylabel>执行备注</displaylabel><size>200</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>否</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>startDate</fieldname><datatype>字符</datatype><displaylabel>开始时间</displaylabel><size>100</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>是</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>finishDate</fieldname><datatype>字符</datatype><displaylabel>完成时间</displaylabel><size>100</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>是</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>previous</fieldname><datatype>字符</datatype><displaylabel>上一步骤</displaylabel><size>100</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>否</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>traceId</fieldname><datatype>整数</datatype><displaylabel>步骤轨迹id</displaylabel><size>10</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>否</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field><field><fieldname>subwfId</fieldname><datatype>整数</datatype><displaylabel>子流程实例id</displaylabel><size>10</size><precision>0</precision><fieldkind>数据项</fieldkind><defaultvalue></defaultvalue><displayformat></displayformat><isnull>否</isnull><iskey>否</iskey><valid>是</valid><procvalid>否</procvalid><link>否</link><target></target><href></href><visible>否</visible><primarykey>否</primarykey><fieldvalid></fieldvalid><tag></tag></field></fields>" onValid='bill_ondatasetvalid("<dsid><stepType></stepType><step></step><stepid></stepid><action></action><actionid></actionid><dynamic_instance_id></dynamic_instance_id><status></status><caller></caller><remark></remark><startDate></startDate><finishDate></finishDate><previous></previous><traceId></traceId><subwfId></subwfId></dsid>")' onGetText='bill_ondatasetgettext("<dsid><stepType></stepType><step></step><stepid></stepid><action></action><actionid></actionid><dynamic_instance_id></dynamic_instance_id><status></status><caller></caller><remark></remark><startDate></startDate><finishDate></finishDate><previous></previous><traceId></traceId><subwfId></subwfId></dsid>")' onSetText='bill_ondatasetsettext("<dsid><stepType></stepType><step></step><stepid></stepid><action></action><actionid></actionid><dynamic_instance_id></dynamic_instance_id><status></status><caller></caller><remark></remark><startDate></startDate><finishDate></finishDate><previous></previous><traceId></traceId><subwfId></subwfId></dsid>")'></fc:dataset>&nbsp;&nbsp; 
<DIV style="POSITION: absolute; WIDTH: 930px; HEIGHT: 760px; TOP: 10px; LEFT: 10px" id=tab1 class="tab-pane tab-pane3" controltype="tab" IsHideTitle="undefined" showtype="luna">
<DIV style="WIDTH: 930px; HEIGHT: 742px" class=tab-page>
<H2 class=tab>流程图</H2>
<DIV style="BORDER-BOTTOM: #cecece 1px solid; POSITION: absolute; BORDER-LEFT: #cecece 1px solid; PADDING-BOTTOM: 0px; OVERFLOW-X: auto; OVERFLOW-Y: auto; BACKGROUND-COLOR: #ffffff; MARGIN: 0px; PADDING-LEFT: 0px; WIDTH: 900px; PADDING-RIGHT: 0px; HEIGHT: 645px; BORDER-TOP: #cecece 1px solid; TOP: 14px; BORDER-RIGHT: #cecece 1px solid; PADDING-TOP: 0px; LEFT: 13px" id=flow onmovestart=moveStart() controltype="div" NotBg="否"><IMG style="POSITION: absolute; TOP: 5px; LEFT: 12px" id=img1 onmovestart=moveStart() src="http://localhost:8080/eden.oa/form/resources/common/images/wf_little_ok.gif" controltype="img" cover="9" srcsk="../../resources/common/images/wf_little_ok.gif"><LABEL style="POSITION: absolute; BACKGROUND-COLOR: #ffffff; WIDTH: 113px; FONT-FAMILY: 宋体; HEIGHT: 19px; COLOR: #808080; FONT-SIZE: 9pt; TOP: 7px; FONT-WEIGHT: bold; LEFT: 31px" id=label1 onmovestart=moveStart() controltype="label" NotBg="否" inputTag="否">已经完成的节点</LABEL><LABEL style="POSITION: absolute; BACKGROUND-COLOR: #ffffff; WIDTH: 110px; FONT-FAMILY: 宋体; HEIGHT: 19px; COLOR: #808080; FONT-SIZE: 9pt; TOP: 27px; FONT-WEIGHT: bold; LEFT: 31px" id=label2 onmovestart=moveStart() controltype="label" NotBg="否" inputTag="否">正在运行的节点</LABEL><IMG style="POSITION: absolute; TOP: 25px; LEFT: 11px" id=img2 onmovestart=moveStart() src="http://localhost:8080/eden.oa/form/resources/common/images/wf_little_run.gif" controltype="img" cover="9" srcsk="../../resources/common/images/wf_little_run.gif"></DIV></DIV>
<DIV style="WIDTH: 930px; HEIGHT: 742px" class=tab-page>
<H2 class=tab>流程记录</H2><fc:webgrid onkeydown='bill_ongridkeydown("<grid1><col></col><col></col><col></col><col></col><col></col><col></col><col></col></grid1>")' id=grid1 ondblclick='bill_ongriddblclick("<grid1><col></col><col>openHistoryAction(ds1.Field(&amp;quot;stepid&amp;quot;).Value,ds1.Field(&amp;quot;actionid&amp;quot;).Value,ds1.Field(&amp;quot;dynamic_instance_id&amp;quot;).Value,ds1.Field(&amp;quot;traceId&amp;quot;).Value,ds1.Field(&amp;quot;stepType&amp;quot;).Value,ds1.Field(&amp;quot;subwfId&amp;quot;).Value)</col><col></col><col>openHistoryAction(ds1.Field(&amp;quot;stepid&amp;quot;).Value,ds1.Field(&amp;quot;actionid&amp;quot;).Value,ds1.Field(&amp;quot;dynamic_instance_id&amp;quot;).Value,ds1.Field(&amp;quot;traceId&amp;quot;).Value,ds1.Field(&amp;quot;stepType&amp;quot;).Value,ds1.Field(&amp;quot;subwfId&amp;quot;).Value)</col><col>openHistoryAction(ds1.Field(&amp;quot;stepid&amp;quot;).Value,ds1.Field(&amp;quot;actionid&amp;quot;).Value,ds1.Field(&amp;quot;dynamic_instance_id&amp;quot;).Value,ds1.Field(&amp;quot;traceId&amp;quot;).Value,ds1.Field(&amp;quot;stepType&amp;quot;).Value,ds1.Field(&amp;quot;subwfId&amp;quot;).Value)</col><col></col><col></col></grid1>")' onclick='bill_ongridclick("<grid1><col></col><col></col><col></col><col></col><col></col><col></col><col></col></grid1>")' controltype="grid" bodyrows="-1" bodyrowheight="-1" readonly="否" showCheckbox="否" colSort="" colType="" colWidth="100,*,100,100,100,180,180" isPage="否" visible="是" dataset="ds1" format="<cols><col><fname>stepType</fname><cname>步骤类型</cname><width>20</width><dtype>字符</dtype><readonly>是</readonly><visible>是</visible><u></u><v></v><s></s><r></r><columnwidth>80</columnwidth><align>left</align></col><col><fname>step</fname><cname>步骤名称</cname><width>100</width><dtype>字符</dtype><readonly>是</readonly><visible>是</visible><u></u><v></v><s></s><r></r><columnwidth>110</columnwidth><align>left</align></col><col><fname>stepid</fname><cname>步骤id</cname><width>10</width><dtype>字符</dtype><readonly>是</readonly><visible>是</visible><u></u><v></v><s></s><r></r><columnwidth>50</columnwidth><align>left</align></col><col><fname>status</fname><cname>步骤状态</cname><width>100</width><dtype>字符</dtype><readonly>是</readonly><visible>是</visible><u></u><v></v><s></s><r></r><columnwidth>70</columnwidth><align>left</align></col><col><fname>caller</fname><cname>执行者</cname><width>100</width><dtype>字符</dtype><readonly>是</readonly><visible>是</visible><u></u><v></v><s></s><r></r><columnwidth>90</columnwidth><align>left</align></col><col><fname>startDate</fname><cname>开始时间</cname><width>100</width><dtype>字符</dtype><readonly>是</readonly><visible>是</visible><u></u><v></v><s></s><r></r><columnwidth>110</columnwidth><align>left</align></col><col><fname>finishDate</fname><cname>完成时间</cname><width>100</width><dtype>字符</dtype><readonly>是</readonly><visible>是</visible><u></u><v></v><s></s><r></r><columnwidth>110</columnwidth><align>left</align></col></cols>" width="900" height="554" top="13" left="9" ParentPos="相对" autoheight="undefined" autowidth="undefined" autoappend="undefined">
<TABLE style="BORDER-COLLAPSE: collapse; TABLE-LAYOUT: fixed; TOP: 0px; LEFT: 0px" id=t cellSpacing=0 cellPadding=1 frame=box>
<TBODY>
<TR class=fcGridFirstRow>
<TD></TD></TR></TBODY></TABLE></fc:webgrid></DIV></DIV>
<SCRIPT>var tab1 = new WebFXTabPane( document.getElementById( "tab1" ) );</SCRIPT>
</DIV><div id='addHtml'></div> </body></html>